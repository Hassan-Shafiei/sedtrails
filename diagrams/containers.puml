@startuml SedtrailContainer
!include <C4/C4_Container>

title sedTRAILS Container Diagram
scale 2



Person(modeler, "Modeler", "wants to track sand particles in a costal system")
Person(analyst, "Analyst", "wants postprocess and visualize simulation outputs")

System_Boundary(sedtrailsSystem, "sedTRAILS Particle Tracking System"){ 
    Container(sedtrailsTracer, "Lagrangian Particle Tracer", "Python", "An application that computes the position of sand particles (x,y,t) in a costal system")
    Container(transportConverter, "Transport Converter", "Python", "An application that pre-process transport flow-field data to convert it to compatible formats and physical units.")
    Container(pathwayVisualizer, "Pathway Visualizer", "Python", "An application to generate plots and animations of sand particle pathways.")
    Container(cache, "Simulation Caching and State Tracker", "Python", "keeps track of simulation state and cache simulation outputs to allow restarts, and reusing simulation outputs")
    
    Rel(transportConverter, sedtrailsTracer, "provides transformed transport data to")
    Rel(sedtrailsTracer, pathwayVisualizer, "provides pathways to", "NETCDF")
    Rel(sedtrailsTracer, cache,  "uses")
    Rel(transportConverter, cache,  "uses")
}

System_Ext(flowSystem, "Eulerian Flow Modeling System", "Simulates flows of water and wind", $type="Any")
System_Ext(connectivityNetworkSys, "Connectivity Network System", "Performs connectiviy network analysis", $type="Any")
System_Ext(statisticsSys, "Statistical Analysis Tooling System", "Performs various statistical analysis", $type="Any")

SystemDb_Ext(fileSystem, "Local File System", "OS file system", $type="Windows, Linux, MacOS")
Rel(sedtrailsTracer, fileSystem, "write transformed transport files to", "NETCDF")
Rel(transportConverter, fileSystem, "write pathway files to", "NETCDF")

Rel(modeler, sedtrailsTracer, "defines simulation parameters and outputs for", "Configuration file")
Rel(connectivityNetworkSys, sedtrailsTracer, "access simulation outputs from", "NETCDF")
Rel(statisticsSys, sedtrailsTracer, "access simulation outputs from", "NETCDF")
Rel(analyst, pathwayVisualizer, "create visualizations of sand pathways using", "Python")
Rel(analyst, connectivityNetworkSys, "post-process simulation outputs in", "Any")
Rel(analyst, statisticsSys, "post-process simulation outputs in", "Any")

Rel(modeler, flowSystem, "produces flow-field data using", "Any")
Rel(flowSystem, transportConverter, "provides flow-field data to ", "NETCDF")


SHOW_LEGEND()
@enduml